<svg width="1200" height="950" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="950" fill="#1a1a2e"/>

  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="#51B059" text-anchor="middle">
    Arquitetura de Microserviços - C4 Container Level
  </text>

  <!-- Legend -->
  <g id="legend">
    <rect x="850" y="50" width="15" height="15" fill="#3B96E6"/>
    <text x="870" y="62" font-family="Arial, sans-serif" font-size="12" fill="white">Frontend/API</text>

    <rect x="970" y="50" width="15" height="15" fill="#51B059"/>
    <text x="990" y="62" font-family="Arial, sans-serif" font-size="12" fill="white">Backend</text>

    <rect x="1070" y="50" width="15" height="15" fill="#DC382D"/>
    <text x="1090" y="62" font-family="Arial, sans-serif" font-size="12" fill="white">Infrastructure</text>
  </g>

  <!-- EXTERNAL SYSTEMS -->
  <g id="external">
    <!-- User/Browser -->
    <ellipse cx="130" cy="110" rx="90" ry="40" fill="#666666" opacity="0.9"/>
    <text x="130" y="105" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Usuário</text>
    <text x="130" y="120" font-family="Arial, sans-serif" font-size="11" fill="#cccccc" text-anchor="middle">Browser</text>

    <!-- Google Maps API -->
    <rect x="950" y="100" width="200" height="70" rx="8" fill="#666666" opacity="0.9" stroke="#999999" stroke-width="2"/>
    <text x="1050" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">[External System]</text>
    <text x="1050" y="142" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle">Google Maps API</text>
    <text x="1050" y="158" font-family="Arial, sans-serif" font-size="11" fill="#cccccc" text-anchor="middle">Street View, Geocoding</text>
  </g>

  <!-- FRONTEND CONTAINER -->
  <g id="frontend">
    <rect x="320" y="60" width="280" height="100" rx="8" fill="#3B96E6" opacity="0.9" stroke="#5AAFFF" stroke-width="3"/>
    <text x="460" y="85" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">[Container: Frontend]</text>
    <text x="460" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">location404-web</text>
    <text x="460" y="125" font-family="Arial, sans-serif" font-size="12" fill="#e0e0e0" text-anchor="middle">Vue 3 + TypeScript + Vite</text>
    <text x="460" y="142" font-family="Arial, sans-serif" font-size="11" fill="#cccccc" text-anchor="middle">UI, GameEngine, SignalR Client</text>
  </g>

  <!-- Traefik Reverse Proxy -->
  <g id="traefik">
    <rect x="320" y="220" width="280" height="80" rx="8" fill="#DC382D" opacity="0.9" stroke="#FF6B6B" stroke-width="3"/>
    <text x="460" y="242" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">[Container: Reverse Proxy]</text>
    <text x="460" y="262" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Traefik v3</text>
    <text x="460" y="282" font-family="Arial, sans-serif" font-size="11" fill="#e0e0e0" text-anchor="middle">Load Balancer, SSL/TLS (Let's Encrypt)</text>
  </g>

  <!-- BACKEND CONTAINERS -->
  <g id="backends">
    <!-- location404-auth -->
    <rect x="50" y="370" width="240" height="110" rx="8" fill="#51B059" opacity="0.9" stroke="#6FCC75" stroke-width="3"/>
    <text x="170" y="392" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Container: API]</text>
    <text x="170" y="412" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" text-anchor="middle">location404-auth</text>
    <text x="170" y="430" font-family="Arial, sans-serif" font-size="11" fill="#e0e0e0" text-anchor="middle">.NET 9 + EF Core</text>
    <text x="170" y="447" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">User Identity, JWT Auth</text>
    <text x="170" y="462" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">Register, Login, RefreshToken</text>

    <!-- location404-game -->
    <rect x="330" y="370" width="240" height="110" rx="8" fill="#51B059" opacity="0.9" stroke="#6FCC75" stroke-width="3"/>
    <text x="450" y="392" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Container: WebSocket Hub]</text>
    <text x="450" y="412" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" text-anchor="middle">location404-game</text>
    <text x="450" y="430" font-family="Arial, sans-serif" font-size="11" fill="#e0e0e0" text-anchor="middle">.NET 9 + SignalR</text>
    <text x="450" y="447" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">Real-time Game Engine</text>
    <text x="450" y="462" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">Matchmaking, Gameplay, Scoring</text>

    <!-- location404-data -->
    <rect x="610" y="370" width="240" height="110" rx="8" fill="#51B059" opacity="0.9" stroke="#6FCC75" stroke-width="3"/>
    <text x="730" y="392" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Container: API]</text>
    <text x="730" y="412" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="white" text-anchor="middle">location404-data</text>
    <text x="730" y="430" font-family="Arial, sans-serif" font-size="11" fill="#e0e0e0" text-anchor="middle">.NET 9 + EF Core</text>
    <text x="730" y="447" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">Locations, Stats, Rankings</text>
    <text x="730" y="462" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">60 global locations, ELO system</text>
  </g>

  <!-- DATA STORES -->
  <g id="datastores">
    <!-- PostgreSQL Auth -->
    <rect x="50" y="560" width="180" height="80" rx="8" fill="#DC382D" opacity="0.8" stroke="#FF6B6B" stroke-width="2"/>
    <text x="140" y="582" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Database]</text>
    <text x="140" y="602" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">PostgreSQL</text>
    <text x="140" y="620" font-family="Arial, sans-serif" font-size="11" fill="#e0e0e0" text-anchor="middle">location404_auth</text>

    <!-- Redis/Dragonfly -->
    <rect x="270" y="560" width="180" height="80" rx="8" fill="#DC382D" opacity="0.8" stroke="#FF6B6B" stroke-width="2"/>
    <text x="360" y="582" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Cache]</text>
    <text x="360" y="602" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Redis/Dragonfly</text>
    <text x="360" y="620" font-family="Arial, sans-serif" font-size="10" fill="#e0e0e0" text-anchor="middle">Game State, Queue, Backplane</text>

    <!-- RabbitMQ -->
    <rect x="490" y="560" width="180" height="80" rx="8" fill="#DC382D" opacity="0.8" stroke="#FF6B6B" stroke-width="2"/>
    <text x="580" y="582" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Message Broker]</text>
    <text x="580" y="602" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">RabbitMQ</text>
    <text x="580" y="620" font-family="Arial, sans-serif" font-size="10" fill="#e0e0e0" text-anchor="middle">Event: match.ended</text>

    <!-- PostgreSQL Data -->
    <rect x="710" y="560" width="180" height="80" rx="8" fill="#DC382D" opacity="0.8" stroke="#FF6B6B" stroke-width="2"/>
    <text x="800" y="582" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Database]</text>
    <text x="800" y="602" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">PostgreSQL</text>
    <text x="800" y="620" font-family="Arial, sans-serif" font-size="10" fill="#e0e0e0" text-anchor="middle">location404_data</text>
  </g>

  <!-- OBSERVABILITY -->
  <g id="observability">
    <rect x="930" y="370" width="220" height="90" rx="8" fill="#FF6600" opacity="0.8" stroke="#FF9933" stroke-width="2"/>
    <text x="1040" y="392" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">[Observability]</text>
    <text x="1040" y="412" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Grafana LGTM</text>
    <text x="1040" y="430" font-family="Arial, sans-serif" font-size="10" fill="#e0e0e0" text-anchor="middle">OpenTelemetry Collector</text>
    <text x="1040" y="446" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">Loki, Prometheus, Tempo</text>
  </g>

  <!-- RELATIONSHIPS -->
  <!-- User to Frontend -->
  <line x1="220" y1="110" x2="320" y2="110" stroke="#3B96E6" stroke-width="2" marker-end="url(#arrowblue)"/>
  <text x="260" y="105" font-family="Arial, sans-serif" font-size="10" fill="white">HTTPS</text>

  <!-- Frontend to Google Maps -->
  <line x1="600" y1="110" x2="950" y2="135" stroke="#666666" stroke-width="2" marker-end="url(#arrowgray)" stroke-dasharray="5,5"/>
  <text x="760" y="115" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">HTTPS API</text>
  <text x="760" y="128" font-family="Arial, sans-serif" font-size="9" fill="#888888">Street View</text>

  <!-- Frontend to Traefik -->
  <line x1="460" y1="160" x2="460" y2="220" stroke="#3B96E6" stroke-width="3" marker-end="url(#arrowblue)"/>
  <text x="480" y="190" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">HTTPS</text>

  <!-- Traefik to Auth -->
  <line x1="360" y1="300" x2="200" y2="370" stroke="#51B059" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <text x="260" y="330" font-family="Arial, sans-serif" font-size="10" fill="#51B059">HTTP REST</text>
  <text x="260" y="343" font-family="Arial, sans-serif" font-size="9" fill="#888888">/api/auth/*</text>

  <!-- Traefik to Game -->
  <line x1="460" y1="300" x2="460" y2="370" stroke="#51B059" stroke-width="3" marker-end="url(#arrowgreen)"/>
  <text x="480" y="335" font-family="Arial, sans-serif" font-size="10" fill="#51B059" font-weight="bold">WebSocket</text>
  <text x="480" y="348" font-family="Arial, sans-serif" font-size="9" fill="#888888">/gamehub</text>

  <!-- Traefik to Data -->
  <line x1="560" y1="300" x2="700" y2="370" stroke="#51B059" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <text x="650" y="330" font-family="Arial, sans-serif" font-size="10" fill="#51B059">HTTP REST</text>
  <text x="650" y="343" font-family="Arial, sans-serif" font-size="9" fill="#888888">/api/locations/*</text>

  <!-- Auth to PostgreSQL Auth -->
  <line x1="140" y1="480" x2="140" y2="560" stroke="#DC382D" stroke-width="2" marker-end="url(#arrowred)"/>
  <text x="160" y="520" font-family="Arial, sans-serif" font-size="9" fill="#cccccc">EF Core</text>
  <text x="160" y="532" font-family="Arial, sans-serif" font-size="8" fill="#888888">Users, Tokens</text>

  <!-- Game to Redis -->
  <line x1="420" y1="480" x2="370" y2="560" stroke="#DC382D" stroke-width="3" marker-end="url(#arrowred)"/>
  <text x="380" y="515" font-family="Arial, sans-serif" font-size="9" fill="#cccccc" font-weight="bold">Redis Protocol</text>
  <text x="380" y="527" font-family="Arial, sans-serif" font-size="8" fill="#888888">Match state, Queue</text>

  <!-- Game to RabbitMQ -->
  <line x1="510" y1="480" x2="565" y2="560" stroke="#FF6600" stroke-width="2" marker-end="url(#arroworange)"/>
  <text x="530" y="515" font-family="Arial, sans-serif" font-size="9" fill="#FF9933">AMQP Publish</text>
  <text x="530" y="527" font-family="Arial, sans-serif" font-size="8" fill="#888888">match.ended</text>

  <!-- RabbitMQ to Data -->
  <line x1="620" y1="600" x2="700" y2="480" stroke="#FF6600" stroke-width="2" marker-end="url(#arroworange)"/>
  <text x="660" y="535" font-family="Arial, sans-serif" font-size="9" fill="#FF9933">AMQP Consume</text>
  <text x="660" y="547" font-family="Arial, sans-serif" font-size="8" fill="#888888">Update stats</text>

  <!-- Data to PostgreSQL Data -->
  <line x1="760" y1="480" x2="800" y2="560" stroke="#DC382D" stroke-width="2" marker-end="url(#arrowred)"/>
  <text x="820" y="520" font-family="Arial, sans-serif" font-size="9" fill="#cccccc">EF Core</text>
  <text x="820" y="532" font-family="Arial, sans-serif" font-size="8" fill="#888888">Locations, Stats</text>

  <!-- Game to Data (HTTP) -->
  <line x1="570" y1="420" x2="610" y2="420" stroke="#51B059" stroke-width="2" marker-end="url(#arrowgreen)" stroke-dasharray="3,3"/>
  <text x="590" y="410" font-family="Arial, sans-serif" font-size="9" fill="#51B059">HTTP</text>
  <text x="590" y="435" font-family="Arial, sans-serif" font-size="8" fill="#888888">GET /random</text>

  <!-- Services to Observability -->
  <line x1="290" y1="425" x2="930" y2="415" stroke="#FF6600" stroke-width="1.5" marker-end="url(#arroworange)" stroke-dasharray="5,5" opacity="0.7"/>
  <line x1="570" y1="425" x2="930" y2="415" stroke="#FF6600" stroke-width="1.5" marker-end="url(#arroworange)" stroke-dasharray="5,5" opacity="0.7"/>
  <line x1="850" y1="425" x2="930" y2="415" stroke="#FF6600" stroke-width="1.5" marker-end="url(#arroworange)" stroke-dasharray="5,5" opacity="0.7"/>
  <text x="700" y="380" font-family="Arial, sans-serif" font-size="9" fill="#FF9933">OTLP (Traces, Metrics, Logs)</text>

  <!-- Docker Swarm annotation -->
  <rect x="20" y="340" width="870" height="160" rx="8" fill="none" stroke="#51B059" stroke-width="2" stroke-dasharray="10,5" opacity="0.5"/>
  <text x="30" y="355" font-family="Arial, sans-serif" font-size="11" fill="#51B059" font-weight="bold">Docker Swarm Cluster</text>
  <text x="30" y="493" font-family="Arial, sans-serif" font-size="10" fill="#888888">2 replicas per service • Sticky sessions • Health checks</text>

  <!-- Three Column Layout -->
  <g id="bottom-sections">
    <!-- Column 1: Padrões de Arquitetura -->
    <rect x="30" y="700" width="360" height="220" rx="8" fill="#51B059" opacity="0.1" stroke="#51B059" stroke-width="2"/>
    <text x="210" y="725" font-family="Arial, sans-serif" font-size="16" fill="#51B059" text-anchor="middle" font-weight="bold">
      Padrões de Arquitetura
    </text>

    <text x="50" y="750" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Clean Architecture:</text>
    <text x="50" y="765" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• 4 camadas (API, Application,</text>
    <text x="50" y="778" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">  Domain, Infrastructure)</text>
    <text x="50" y="791" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• Dependency Injection</text>
    <text x="50" y="804" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• CQRS com LiteBus</text>

    <text x="50" y="827" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Comunicação:</text>
    <text x="50" y="842" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• HTTP REST, WebSocket</text>
    <text x="50" y="855" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• RabbitMQ (Event-driven)</text>
    <text x="50" y="868" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• Redis Backplane (SignalR)</text>

    <text x="50" y="891" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Segurança:</text>
    <text x="50" y="906" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• JWT + RefreshToken (cookies)</text>

    <!-- Column 2: Stack de Tecnologia -->
    <rect x="410" y="700" width="360" height="220" rx="8" fill="#3B96E6" opacity="0.1" stroke="#3B96E6" stroke-width="2"/>
    <text x="590" y="725" font-family="Arial, sans-serif" font-size="16" fill="#3B96E6" text-anchor="middle" font-weight="bold">
      Stack de Tecnologia
    </text>

    <text x="430" y="750" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Frontend:</text>
    <text x="430" y="765" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• Vue 3, TypeScript, Pinia</text>
    <text x="430" y="778" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• SignalR Client</text>
    <text x="430" y="791" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• Google Maps API, Axios</text>

    <text x="430" y="814" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Backend:</text>
    <text x="430" y="829" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• .NET 9, SignalR</text>
    <text x="430" y="842" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• EF Core 9</text>
    <text x="430" y="855" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• JWT, BCrypt</text>

    <text x="430" y="878" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Infrastructure:</text>
    <text x="430" y="893" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• Docker Swarm, Traefik v3</text>
    <text x="430" y="906" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• PostgreSQL, Redis, RabbitMQ</text>

    <!-- Column 3: Deploy e Escalabilidade -->
    <rect x="790" y="700" width="380" height="220" rx="8" fill="#DC382D" opacity="0.1" stroke="#DC382D" stroke-width="2"/>
    <text x="980" y="725" font-family="Arial, sans-serif" font-size="16" fill="#DC382D" text-anchor="middle" font-weight="bold">
      Deploy e Escalabilidade
    </text>

    <text x="810" y="750" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">VPS:</text>
    <text x="810" y="765" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• 2 cores, 8GB RAM</text>

    <text x="810" y="788" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Replicas:</text>
    <text x="810" y="803" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• 2x web, 2x auth</text>
    <text x="810" y="816" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• 2x game, 2x data</text>

    <text x="810" y="839" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">CI/CD:</text>
    <text x="810" y="854" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• GitHub Actions</text>
    <text x="810" y="867" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• GitHub Container Registry</text>

    <text x="810" y="890" font-family="Arial, sans-serif" font-size="11" fill="white" font-weight="bold">Features:</text>
    <text x="810" y="905" font-family="Arial, sans-serif" font-size="10" fill="#cccccc">• Rolling updates, Zero-downtime</text>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#3B96E6"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#51B059"/>
    </marker>
    <marker id="arrowred" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#DC382D"/>
    </marker>
    <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#FF6600"/>
    </marker>
    <marker id="arrowgray" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666666"/>
    </marker>
  </defs>
</svg>
